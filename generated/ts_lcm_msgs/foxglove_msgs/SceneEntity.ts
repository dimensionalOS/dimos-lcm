// Auto-generated by lcm-ts. DO NOT EDIT.

import { Time } from "../builtin_interfaces/Time.ts";
import { Duration } from "../builtin_interfaces/Duration.ts";
import { KeyValuePair } from "./KeyValuePair.ts";
import { ArrowPrimitive } from "./ArrowPrimitive.ts";
import { CubePrimitive } from "./CubePrimitive.ts";
import { SpherePrimitive } from "./SpherePrimitive.ts";
import { CylinderPrimitive } from "./CylinderPrimitive.ts";
import { LinePrimitive } from "./LinePrimitive.ts";
import { TriangleListPrimitive } from "./TriangleListPrimitive.ts";
import { TextPrimitive } from "./TextPrimitive.ts";
import { ModelPrimitive } from "./ModelPrimitive.ts";

export class SceneEntity {
  static readonly _HASH = 0xcadadec8cad8e600n;
  static readonly _NAME = "foxglove_msgs.SceneEntity";

  metadata_length: number;
  arrows_length: number;
  cubes_length: number;
  spheres_length: number;
  cylinders_length: number;
  lines_length: number;
  triangles_length: number;
  texts_length: number;
  models_length: number;
  timestamp: Time;
  frame_id: string;
  id: string;
  lifetime: Duration;
  frame_locked: boolean;
  metadata: KeyValuePair[];
  arrows: ArrowPrimitive[];
  cubes: CubePrimitive[];
  spheres: SpherePrimitive[];
  cylinders: CylinderPrimitive[];
  lines: LinePrimitive[];
  triangles: TriangleListPrimitive[];
  texts: TextPrimitive[];
  models: ModelPrimitive[];

  constructor(init?: Partial<SceneEntity>) {
    this.metadata_length = init?.metadata_length ?? 0;
    this.arrows_length = init?.arrows_length ?? 0;
    this.cubes_length = init?.cubes_length ?? 0;
    this.spheres_length = init?.spheres_length ?? 0;
    this.cylinders_length = init?.cylinders_length ?? 0;
    this.lines_length = init?.lines_length ?? 0;
    this.triangles_length = init?.triangles_length ?? 0;
    this.texts_length = init?.texts_length ?? 0;
    this.models_length = init?.models_length ?? 0;
    this.timestamp = init?.timestamp ?? new Time();
    this.frame_id = init?.frame_id ?? "";
    this.id = init?.id ?? "";
    this.lifetime = init?.lifetime ?? new Duration();
    this.frame_locked = init?.frame_locked ?? false;
    this.metadata = init?.metadata ?? [];
    this.arrows = init?.arrows ?? [];
    this.cubes = init?.cubes ?? [];
    this.spheres = init?.spheres ?? [];
    this.cylinders = init?.cylinders ?? [];
    this.lines = init?.lines ?? [];
    this.triangles = init?.triangles ?? [];
    this.texts = init?.texts ?? [];
    this.models = init?.models ?? [];
  }

  static decode(data: Uint8Array): SceneEntity {
    const view = new DataView(data.buffer, data.byteOffset, data.byteLength);
    let offset = 0;

    // Verify fingerprint
    const hash = view.getBigUint64(offset, false);
    offset += 8;
    if (hash !== SceneEntity._HASH) {
      throw new Error(`Hash mismatch: expected ${SceneEntity._HASH.toString(16)}, got ${hash.toString(16)}`);
    }

    const result = new SceneEntity();
    ({ offset } = SceneEntity._decodeOne(view, offset, result));
    return result;
  }

  static _decodeOne(view: DataView, offset: number, target: SceneEntity): { offset: number } {
    target.metadata_length = view.getInt32(offset, false);
    offset += 4;
    target.arrows_length = view.getInt32(offset, false);
    offset += 4;
    target.cubes_length = view.getInt32(offset, false);
    offset += 4;
    target.spheres_length = view.getInt32(offset, false);
    offset += 4;
    target.cylinders_length = view.getInt32(offset, false);
    offset += 4;
    target.lines_length = view.getInt32(offset, false);
    offset += 4;
    target.triangles_length = view.getInt32(offset, false);
    offset += 4;
    target.texts_length = view.getInt32(offset, false);
    offset += 4;
    target.models_length = view.getInt32(offset, false);
    offset += 4;
    target.timestamp = new Time();
    ({ offset } = Time._decodeOne(view, offset, target.timestamp));
    {
      const len = view.getUint32(offset, false);
      offset += 4;
      target.frame_id = new TextDecoder().decode(new Uint8Array(view.buffer, view.byteOffset + offset, len - 1));
      offset += len;
    }
    {
      const len = view.getUint32(offset, false);
      offset += 4;
      target.id = new TextDecoder().decode(new Uint8Array(view.buffer, view.byteOffset + offset, len - 1));
      offset += len;
    }
    target.lifetime = new Duration();
    ({ offset } = Duration._decodeOne(view, offset, target.lifetime));
    target.frame_locked = view.getInt8(offset) !== 0;
    offset += 1;
    target.metadata = new Array(target.metadata_length);
    for (let i0 = 0; i0 < target.metadata_length; i0++) {
      target.metadata[i0] = new KeyValuePair();
      ({ offset } = KeyValuePair._decodeOne(view, offset, target.metadata[i0]));
    }
    target.arrows = new Array(target.arrows_length);
    for (let i0 = 0; i0 < target.arrows_length; i0++) {
      target.arrows[i0] = new ArrowPrimitive();
      ({ offset } = ArrowPrimitive._decodeOne(view, offset, target.arrows[i0]));
    }
    target.cubes = new Array(target.cubes_length);
    for (let i0 = 0; i0 < target.cubes_length; i0++) {
      target.cubes[i0] = new CubePrimitive();
      ({ offset } = CubePrimitive._decodeOne(view, offset, target.cubes[i0]));
    }
    target.spheres = new Array(target.spheres_length);
    for (let i0 = 0; i0 < target.spheres_length; i0++) {
      target.spheres[i0] = new SpherePrimitive();
      ({ offset } = SpherePrimitive._decodeOne(view, offset, target.spheres[i0]));
    }
    target.cylinders = new Array(target.cylinders_length);
    for (let i0 = 0; i0 < target.cylinders_length; i0++) {
      target.cylinders[i0] = new CylinderPrimitive();
      ({ offset } = CylinderPrimitive._decodeOne(view, offset, target.cylinders[i0]));
    }
    target.lines = new Array(target.lines_length);
    for (let i0 = 0; i0 < target.lines_length; i0++) {
      target.lines[i0] = new LinePrimitive();
      ({ offset } = LinePrimitive._decodeOne(view, offset, target.lines[i0]));
    }
    target.triangles = new Array(target.triangles_length);
    for (let i0 = 0; i0 < target.triangles_length; i0++) {
      target.triangles[i0] = new TriangleListPrimitive();
      ({ offset } = TriangleListPrimitive._decodeOne(view, offset, target.triangles[i0]));
    }
    target.texts = new Array(target.texts_length);
    for (let i0 = 0; i0 < target.texts_length; i0++) {
      target.texts[i0] = new TextPrimitive();
      ({ offset } = TextPrimitive._decodeOne(view, offset, target.texts[i0]));
    }
    target.models = new Array(target.models_length);
    for (let i0 = 0; i0 < target.models_length; i0++) {
      target.models[i0] = new ModelPrimitive();
      ({ offset } = ModelPrimitive._decodeOne(view, offset, target.models[i0]));
    }
    return { offset };
  }

  encode(): Uint8Array {
    const size = 8 + this._encodedSize();
    const data = new Uint8Array(size);
    const view = new DataView(data.buffer);
    let offset = 0;

    // Write fingerprint
    view.setBigUint64(offset, SceneEntity._HASH, false);
    offset += 8;

    offset = this._encodeOne(view, offset);
    return data;
  }

  _encodeOne(view: DataView, offset: number): number {
    view.setInt32(offset, this.metadata_length, false);
    offset += 4;
    view.setInt32(offset, this.arrows_length, false);
    offset += 4;
    view.setInt32(offset, this.cubes_length, false);
    offset += 4;
    view.setInt32(offset, this.spheres_length, false);
    offset += 4;
    view.setInt32(offset, this.cylinders_length, false);
    offset += 4;
    view.setInt32(offset, this.lines_length, false);
    offset += 4;
    view.setInt32(offset, this.triangles_length, false);
    offset += 4;
    view.setInt32(offset, this.texts_length, false);
    offset += 4;
    view.setInt32(offset, this.models_length, false);
    offset += 4;
    offset = this.timestamp._encodeOne(view, offset);
    {
      const encoded = new TextEncoder().encode(this.frame_id);
      view.setUint32(offset, encoded.length + 1, false);
      offset += 4;
      new Uint8Array(view.buffer, view.byteOffset + offset).set(encoded);
      offset += encoded.length;
      view.setUint8(offset, 0); // null terminator
      offset += 1;
    }
    {
      const encoded = new TextEncoder().encode(this.id);
      view.setUint32(offset, encoded.length + 1, false);
      offset += 4;
      new Uint8Array(view.buffer, view.byteOffset + offset).set(encoded);
      offset += encoded.length;
      view.setUint8(offset, 0); // null terminator
      offset += 1;
    }
    offset = this.lifetime._encodeOne(view, offset);
    view.setInt8(offset, this.frame_locked ? 1 : 0);
    offset += 1;
    for (let i0 = 0; i0 < this.metadata_length; i0++) {
      offset = this.metadata[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.arrows_length; i0++) {
      offset = this.arrows[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.cubes_length; i0++) {
      offset = this.cubes[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.spheres_length; i0++) {
      offset = this.spheres[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.cylinders_length; i0++) {
      offset = this.cylinders[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.lines_length; i0++) {
      offset = this.lines[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.triangles_length; i0++) {
      offset = this.triangles[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.texts_length; i0++) {
      offset = this.texts[i0]._encodeOne(view, offset);
    }
    for (let i0 = 0; i0 < this.models_length; i0++) {
      offset = this.models[i0]._encodeOne(view, offset);
    }
    return offset;
  }

  _encodedSize(): number {
    let size = 0;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += 4;
    size += this.timestamp._encodedSize();
    size += 4 + new TextEncoder().encode(this.frame_id).length + 1;
    size += 4 + new TextEncoder().encode(this.id).length + 1;
    size += this.lifetime._encodedSize();
    size += 1;
    for (let i0 = 0; i0 < this.metadata_length; i0++) {
      size += this.metadata[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.arrows_length; i0++) {
      size += this.arrows[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.cubes_length; i0++) {
      size += this.cubes[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.spheres_length; i0++) {
      size += this.spheres[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.cylinders_length; i0++) {
      size += this.cylinders[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.lines_length; i0++) {
      size += this.lines[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.triangles_length; i0++) {
      size += this.triangles[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.texts_length; i0++) {
      size += this.texts[i0]._encodedSize();
    }
    for (let i0 = 0; i0 < this.models_length; i0++) {
      size += this.models[i0]._encodedSize();
    }
    return size;
  }
}
